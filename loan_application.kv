
Screen:
    name: 'apply_loan'
    on_enter: instalment_slider.value = 1
    on_leave: 
        principal.text = ""
        amount.text =""
    BoxLayout:
        orientation: 'vertical'
        spacing: '10dp'
        TopBar:
            left_action_items : [["chevron-left" , lambda _: setattr(root.manager, 'current', 'loan_products')]]
            title: 'Apply Loan'
        MDBoxLayout:
            orientation:'vertical'
            padding: '20dp'
            spacing: '10dp'
            MDBoxLayout:
                orientation:'vertical'
                md_bg_color: (9/255, 178/255, 159/255, .2)
                size_hint_y: .1
                radius:[10,]
                padding:10
                spacing:10
                MDBoxLayout:
                    MDLabel:
                        text: 'Category:'
                        halign: 'center'
                        font_name: 'Poppins-SemiBold'
                        color: 1,1,1,1
                        font_size: '12dp'
                        halign: 'left'
                        color: (9/255, 178/255, 159/255, 1)
                    MDLabel:
                        id: loan_cat
                        halign: 'center'
                        font_name: 'Poppins-SemiBold'
                        color: 1,1,1,1
                        font_size: '11dp'
                        halign: 'center'
                        color: (9/255, 178/255, 159/255, 1)
                        size_hint_x:.5
                        canvas.before:
                            Color:
                                rgba: 1,1,1,.65
                            Rectangle:
                                pos:self.pos
                                size:self.size
                MDBoxLayout:
                    MDLabel:
                        text:'Membership No.:'
                        halign: 'left'
                        font_name: 'Poppins-SemiBold'
                        color: 1,1,1,1
                        font_size: '12dp'
                        color: (9/255, 178/255, 159/255, 1)
                    MDLabel:
                        id: mem_no
                        halign: 'right'
                        font_name: 'Poppins-SemiBold'
                        color: 1,1,1,1
                        color: (9/255, 178/255, 159/255, 1)
                        size_hint_x:.5
                        canvas.before:
                            Color:
                                rgba: 1,1,1,.65
                            Rectangle:
                                pos:self.pos
                                size:self.size
            
            MDBoxLayout:
                size_hint_y: .05
                md_bg_color: (9/255, 178/255, 159/255, .2)
                radius:[10,]
                padding: 10
                MDLabel:
                    text:'Amount Applied'
                    halign:'left'
                    color: (9/255, 178/255, 159/255, 1)
                TextInput:
                    id:principal
                    size_hint_x: .5
                    font_size: '14dp'
                    font_name: 'Poppins-SemiBold'
                    foreground_color: (9/255, 178/255, 159/255, 1)
                    background_color: (1,1,1,.75)
                    halign:'right'
                    valign:'center'
                    multiline:False
            MDBoxLayout:
                size_hint: 1, .05
                md_bg_color: (9/255, 178/255, 159/255, .2)
                radius:[10,]
                MDSlider:
                    id:instalment_slider
                    hint: True
                    max:60
                    value:1
                    step:1
                    hint_bg_color: 1,1,1,1
                    thumb_color_active:9/255, 178/255, 159/255, 1
                    track_color_active:1,1,1,1
                    color: 9/255, 178/255, 159/255, 1
                    on_touch_up: app.loan_amount_calculator(principal,instalments)
            MDBoxLayout:
                size_hint_y: .05
                md_bg_color: (9/255, 178/255, 159/255, .2)
                padding:10
                radius:[10,]
                MDLabel:
                    text:'Instalments (months)'
                    halign:'left'
                    color: (9/255, 178/255, 159/255, 1)
                TextInput:
                    id:instalments
                    text: str(int(instalment_slider.value))
                    hint_text: 
                    size_hint_x: .5
                    foreground_color: (9/255, 178/255, 159/255, 1)
                    background_color: (1,1,1,.75)
                    font_name: 'Poppins-Bold'
                    halign:'center'
                    valign:'center'
                    multiline:False
            MDBoxLayout:
                size_hint_y: .05
                md_bg_color: (9/255, 178/255, 159/255, .2)
                padding:10
                radius:[10,]
                MDLabel:
                    text:'Repayable Amount'
                    halign:'left'
                    color: (9/255, 178/255, 159/255, 1)
                
                MDLabel:
                    id: amount
                    halign: 'right'
                    font_name: 'Poppins-SemiBold'
                    color: 1,1,1,1
                    color: (9/255, 178/255, 159/255, 1)
                    size_hint_x:.5
                    canvas.before:
                        Color:
                            rgba: 1,1,1,.65
                        Rectangle:
                            pos:self.pos
                            size:self.size
            MDFloatLayout: 
                size_hint_y:.3      
                RaisedButton:
                    text: 'Submit Application'
                    font_name: "Poppins-SemiBold"
                    pos_hint:{'center_x':.5,'center_y':.9}
                    size_hint_x:1
                    on_release:
                        app.apply_loan(mem_no,loan_cat,principal,instalments)
                MDFlatButton:
                    text: 'Already Applied?'
                    font_size: "12sp"
                    size_hint_y: .1
                    font_name: "Poppins-Bold"
                    pos_hint: {"center_x": .5, "center_y": .7}
                    theme_text_color: "Custom"
                    text_color: 9/255, 178/255, 159/255, 1
                    background_color: (1,1,1,1)
                    on_release:  root.manager.current='guarantors'
                
                      

            # Widget:
                